.edifly-checkbox-wrapper {
  display: inline-flex;
  align-items: flex-start;
  gap: 8px;
  cursor: pointer;
  font-family: var(--edifly-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
  transition: all var(--edifly-transition-base, 0.2s ease-in-out);
  line-height: 1.5;
}

.edifly-checkbox-wrapper:hover:not(.edifly-checkbox-wrapper--disabled) .edifly-checkbox {
  border-color: var(--edifly-color-primary, #1890ff);
}

.edifly-checkbox-wrapper--disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

.edifly-checkbox {
  position: relative;
  display: inline-block;
  flex-shrink: 0;
  border: 2px solid var(--edifly-color-border, #d9d9d9);
  border-radius: var(--edifly-border-radius-xs, 2px);
  background-color: var(--edifly-color-bg, #ffffff);
  transition: all var(--edifly-transition-base, 0.2s ease-in-out);
}

.edifly-checkbox__input {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  margin: 0;
  cursor: inherit;
}

.edifly-checkbox__input:focus + .edifly-checkbox__inner {
  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
}

.edifly-checkbox__inner {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;
  z-index: 1;
}

/* Sizes */
.edifly-checkbox--small {
  width: 14px;
  height: 14px;
}

.edifly-checkbox--small .edifly-checkbox__icon {
  width: 10px;
  height: 10px;
}

.edifly-checkbox--medium {
  width: 16px;
  height: 16px;
}

.edifly-checkbox--medium .edifly-checkbox__icon {
  width: 12px;
  height: 12px;
}

.edifly-checkbox--large {
  width: 18px;
  height: 18px;
}

.edifly-checkbox--large .edifly-checkbox__icon {
  width: 14px;
  height: 14px;
}

/* Checked state */
.edifly-checkbox-wrapper--checked .edifly-checkbox,
.edifly-checkbox-wrapper--indeterminate .edifly-checkbox {
  border-color: var(--edifly-color-primary, #1890ff);
  background-color: var(--edifly-color-primary, #1890ff);
}

.edifly-checkbox-wrapper--checked:hover:not(.edifly-checkbox-wrapper--disabled) .edifly-checkbox,
.edifly-checkbox-wrapper--indeterminate:hover:not(.edifly-checkbox-wrapper--disabled) .edifly-checkbox {
  background-color: var(--edifly-color-primary-hover, #40a9ff);
  border-color: var(--edifly-color-primary-hover, #40a9ff);
}

/* Icons */
.edifly-checkbox__icon {
  color: white;
  transition: all var(--edifly-transition-base, 0.2s ease-in-out);
}

.edifly-checkbox__icon--check {
  transform: scale(0);
  animation: checkboxCheck 0.2s ease-in-out forwards;
}

.edifly-checkbox__icon--indeterminate {
  transform: scale(0);
  animation: checkboxIndeterminate 0.2s ease-in-out forwards;
}

@keyframes checkboxCheck {
  0% {
    transform: scale(0) rotate(45deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) rotate(45deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes checkboxIndeterminate {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Label */
.edifly-checkbox__label {
  color: var(--edifly-color-text, #000000d9);
  font-size: var(--edifly-font-size-sm, 14px);
  user-select: none;
  margin-top: 1px; /* Align with checkbox center */
}

.edifly-checkbox-wrapper--disabled .edifly-checkbox__label {
  color: var(--edifly-color-text-disabled, #00000040);
}

/* Size-specific label adjustments */
.edifly-checkbox--small + .edifly-checkbox__label {
  font-size: 12px;
  margin-top: 0;
}

.edifly-checkbox--large + .edifly-checkbox__label {
  font-size: 16px;
  margin-top: 2px;
}

/* Disabled state */
.edifly-checkbox-wrapper--disabled .edifly-checkbox {
  background-color: var(--edifly-color-bg-disabled, #f5f5f5);
  border-color: var(--edifly-color-border, #d9d9d9);
}

.edifly-checkbox-wrapper--disabled.edifly-checkbox-wrapper--checked .edifly-checkbox,
.edifly-checkbox-wrapper--disabled.edifly-checkbox-wrapper--indeterminate .edifly-checkbox {
  background-color: var(--edifly-color-text-disabled, #00000040);
  border-color: var(--edifly-color-text-disabled, #00000040);
}

/* Error state */
.edifly-checkbox-wrapper--error .edifly-checkbox {
  border-color: var(--edifly-color-danger, #ff4d4f);
}

.edifly-checkbox-wrapper--error:hover:not(.edifly-checkbox-wrapper--disabled) .edifly-checkbox {
  border-color: var(--edifly-color-danger-hover, #ff7875);
}

.edifly-checkbox-wrapper--error .edifly-checkbox__input:focus + .edifly-checkbox__inner {
  box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
}

/* Dark theme support */
[data-theme="dark"] .edifly-checkbox {
  background-color: var(--edifly-color-bg, #141414);
  border-color: var(--edifly-color-border, #424242);
}

[data-theme="dark"] .edifly-checkbox-wrapper--disabled .edifly-checkbox {
  background-color: var(--edifly-color-bg-disabled, #262626);
  border-color: var(--edifly-color-border, #424242);
}

[data-theme="dark"] .edifly-checkbox__label {
  color: var(--edifly-color-text, #ffffffd9);
}

[data-theme="dark"] .edifly-checkbox-wrapper--disabled .edifly-checkbox__label {
  color: var(--edifly-color-text-disabled, #ffffff40);
}